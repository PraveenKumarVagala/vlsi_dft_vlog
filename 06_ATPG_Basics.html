<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATPG Basics | DFT Blog</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1><a href="index.html">ğŸ”§ DFT Blog</a></h1>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="05_Scan_Chains.html">â† Prev</a>
                <a href="07_Scan_Compression.html">Next â†’</a>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="article-header">
            <span class="article-number">Part 6 of 11</span>
            <h1>ATPG Basics</h1>
            <p class="subtitle">Automatic Test Pattern Generation explained</p>
            <p class="author">By <strong>Praveen Kumar Vagala</strong></p>
            <div class="view-counter">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                <span class="view-count">1,267</span> views
            </div>
        </div>

        <h2>What is ATPG?</h2>
        <p><strong>ATPG = Automatic Test Pattern Generation</strong></p>
        <p>Software that automatically creates test patterns to detect manufacturing defects.</p>

<div class="diagram">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Netlist   â”‚â”€â”€â”€â”€â”€â–ºâ”‚    ATPG     â”‚â”€â”€â”€â”€â”€â–ºâ”‚  Patterns   â”‚
â”‚  + Faults   â”‚      â”‚    Tool     â”‚      â”‚   (.stil)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    Coverage Report</div>

        <h2>Fault Models</h2>

        <h3>Stuck-At Faults (Primary Model)</h3>
        <p>Models a wire permanently stuck at logic 0 or 1.</p>

<div class="diagram">Stuck-at-0 (SA0): Wire always 0, regardless of input
Stuck-at-1 (SA1): Wire always 1, regardless of input

Example:
   A â”€â”€â”¬â”€â”€ W â”€â”€â–º Buffer â”€â”€â–º Y
       â”‚
   (SA0 fault on W)
       
Good circuit: A=1 â†’ W=1 â†’ Y=1
Faulty:       A=1 â†’ W=0 â†’ Y=0  â† Detectable!</div>

        <h3>Transition Faults (For Timing)</h3>
        <p>Models slow transistors that can't switch fast enough.</p>

<div class="diagram">Slow-to-Rise (STR): 0â†’1 transition too slow
Slow-to-Fall (STF): 1â†’0 transition too slow

        Expected         Actual (STR)
           â”Œâ”€â”€â”€â”€             â•±â”€â”€â”€â”€
        â”€â”€â”€â”˜             â”€â”€â”€â•±
        Fast rise        Slow rise - may miss clock!</div>

        <h3>Other Fault Models</h3>
        <table>
            <tr><th>Model</th><th>Catches</th></tr>
            <tr><td>Stuck-at</td><td>Opens, shorts, manufacturing defects</td></tr>
            <tr><td>Transition</td><td>Weak transistors, timing defects</td></tr>
            <tr><td>Path Delay</td><td>Critical path failures</td></tr>
            <tr><td>Bridging</td><td>Shorts between adjacent wires</td></tr>
            <tr><td>IDDQ</td><td>Defects causing excess current</td></tr>
        </table>

        <h2>How ATPG Works</h2>
        <p>For each fault, ATPG does three things:</p>

        <h3>1. Activate the Fault</h3>
        <p>Set conditions so good and faulty circuits produce different values.</p>
<div class="diagram">To activate SA0 on wire W:
  - W must be 1 in good circuit
  - W is 0 in faulty circuit (stuck!)
  - Difference created!</div>

        <h3>2. Propagate to Output</h3>
        <p>Create a path from fault site to an observable output.</p>
<div class="diagram">         Fault
           â”‚
           â–¼
   Input â”€â”€ANDâ”€â”€ W â”€â”€ANDâ”€â”€ Output
                      â”‚
                      C
                      
Set C=1 so W's value reaches Output (WÂ·1 = W)</div>

        <h3>3. Justify to Inputs</h3>
        <p>Work backwards to find required input values.</p>
<div class="diagram">                   Need W=1
                      â”‚
         A â”€â”€â”¬â”€â”€ANDâ”€â”€â–ºW
             â”‚
         B â”€â”€â”˜
         
To get W=1, need A=1 AND B=1</div>

        <h3>Complete Example</h3>
<div class="diagram">Detect SA0 on wire W:

         A â”€â”€â”€â”€â”€â”¬â”€â”€â”€ANDâ”€â”€â”€Wâ”€â”€â”€ANDâ”€â”€â”€Y
                â”‚              â”‚
         B â”€â”€â”€â”€â”€â”˜         C â”€â”€â”€â”˜
         
Step 1 (Activate): Need W=1 in good circuit
        â†’ Set A=1, B=1 (W should be 1)
        
Step 2 (Propagate): Need effect at Y
        â†’ Set C=1 (Y = WÂ·C = W)
        
Step 3 (Justify): Already done!

Test Pattern: A=1, B=1, C=1
Expected Y (good):   1Â·1Â·1 = 1
Expected Y (faulty): 0Â·1 = 0  â† Different! Fault detected!</div>

        <h2>Fault Classes</h2>
        <p>After ATPG runs, faults are classified:</p>

        <table>
            <tr><th>Class</th><th>Code</th><th>Meaning</th></tr>
            <tr><td>Detected</td><td>DT</td><td>Pattern exists to detect</td></tr>
            <tr><td>Possibly Detected</td><td>PT</td><td>Might detect (probabilistic)</td></tr>
            <tr><td>Undetected</td><td>UD</td><td>No pattern found (yet)</td></tr>
            <tr><td>ATPG Untestable</td><td>AU</td><td>Structurally impossible to test</td></tr>
            <tr><td>Unobservable</td><td>UO</td><td>Can't see at any output</td></tr>
            <tr><td>Uncontrollable</td><td>UC</td><td>Can't set required value</td></tr>
            <tr><td>Tied</td><td>TI</td><td>Tied to constant, not a fault</td></tr>
            <tr><td>Blocked</td><td>BL</td><td>User excluded from testing</td></tr>
        </table>

        <h3>Coverage Calculation</h3>
<pre><code>Fault Coverage = DT / (Total - AU - TI - BL) Ã— 100%

Example:
  Total faults:     1,000,000
  Detected (DT):      970,000
  Untestable (AU):     10,000
  Tied (TI):            5,000
  
  Coverage = 970,000 / (1,000,000 - 10,000 - 5,000)
           = 970,000 / 985,000
           = 98.5%</code></pre>

        <h2>Fault Collapsing</h2>
        <p>Many faults are equivalent - one test detects multiple faults.</p>

<div class="diagram">     A â”€â”€â”€â”¬â”€â”€â”€ W â”€â”€â”€â–º Y
          â”‚
          AND
          â”‚
     B â”€â”€â”€â”˜

Equivalent faults (same test detects all):
- A SA0
- B SA0  
- W SA0
- Y SA0

Collapse 4 faults to 1 representative fault!</div>

        <h3>Benefits</h3>
        <ul>
            <li>Faster ATPG run time</li>
            <li>Smaller fault list to manage</li>
            <li>Same coverage with fewer patterns</li>
        </ul>

        <h2>ATPG Tool Flow (TetraMAX Example)</h2>
<pre><code># 1. Read design
read_netlist design_scan.v
run_build_model

# 2. Read scan protocol
run_drc scan.spf

# 3. Set fault model
set_faults -model stuck
add_faults -all

# 4. Run ATPG
set_atpg -merge high
run_atpg -auto

# 5. Report coverage
report_faults -summary

# 6. Write patterns
write_patterns patterns.stil -format stil -replace</code></pre>

        <div class="summary">
            <h3>Summary</h3>
            <table>
                <tr><th>Concept</th><th>Key Point</th></tr>
                <tr><td>ATPG</td><td>Auto-generates test patterns</td></tr>
                <tr><td>Stuck-at</td><td>Wire stuck at 0 or 1</td></tr>
                <tr><td>Transition</td><td>Slow rising or falling edge</td></tr>
                <tr><td>Activate</td><td>Create difference at fault site</td></tr>
                <tr><td>Propagate</td><td>Path to observable output</td></tr>
                <tr><td>Justify</td><td>Set required input values</td></tr>
                <tr><td>Coverage</td><td>DT / (Total - AU)</td></tr>
            </table>
        </div>

        <div class="nav-buttons">
            <a href="05_Scan_Chains.html" class="nav-btn prev">Scan Chains</a>
            <a href="07_Scan_Compression.html" class="nav-btn next">Scan Compression</a>
        </div>
    </div>
    
    <div class="footer">
        <p>DFT Engineering Blog Series | Part 6 of 11</p>
    </div>
</body>
</html>

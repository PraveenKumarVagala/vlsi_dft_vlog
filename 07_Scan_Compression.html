<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scan Compression | DFT Blog</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1><a href="index.html">ğŸ”§ DFT Blog</a></h1>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="06_ATPG_Basics.html">â† Prev</a>
                <a href="08_At_Speed_Testing.html">Next â†’</a>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="article-header">
            <span class="article-number">Part 7 of 11</span>
            <h1>Scan Compression</h1>
            <p class="subtitle">Reducing test time from hours to minutes</p>
            <p class="author">By <strong>Praveen Kumar Vagala</strong></p>
            <div class="view-counter">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                <span class="view-count">1,145</span> views
            </div>
        </div>

        <h2>The Problem</h2>
        <p>Modern chips have millions of flip-flops. Testing without compression is impractical.</p>

<pre><code>Example:
  Chip has:       10,000,000 flip-flops
  Shift in:       10M bits
  Shift out:      10M bits
  At 100MHz:      0.1 seconds per pattern
  With 10,000 patterns: 1000 seconds = 17 minutes per chip!
  
  At $0.01/second tester cost:
  17 minutes Ã— $0.01/sec Ã— 1M chips = $10M in test costs!</code></pre>

        <h2>The Solution: Compression</h2>
        <p>Reduce the data volume between tester and chip.</p>

<div class="diagram">Without Compression:
  ATE â”€â”€[10M bits]â”€â”€â–º Chip â”€â”€[10M bits]â”€â”€â–º ATE
  
With 100:1 Compression:
  ATE â”€â”€[100K bits]â”€â”€â–º Chip â”€â”€[100K bits]â”€â”€â–º ATE
  
17 minutes â†’ 10 seconds!</div>

        <h2>Compression Architecture</h2>

<div class="diagram">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚    ATE                        Chip                        ATE â”‚
â”‚  (10 ch)                                                (10 ch)â”‚
â”‚                                                               â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”€â”€â”€â–ºâ”‚        â”‚â”€â”€â”€â”€â–ºâ”‚                 â”‚â”€â”€â”€â”€â–ºâ”‚        â”‚â”€â”€â”€â–º    â”‚
â”‚ â”€â”€â”€â–ºâ”‚  DEC   â”‚â”€â”€â”€â”€â–ºâ”‚   1000 Scan     â”‚â”€â”€â”€â”€â–ºâ”‚  COMP  â”‚â”€â”€â”€â–º    â”‚
â”‚ â”€â”€â”€â–ºâ”‚  OMP   â”‚â”€â”€â”€â”€â–ºâ”‚    Chains       â”‚â”€â”€â”€â”€â–ºâ”‚  ACT   â”‚â”€â”€â”€â–º    â”‚
â”‚ â”€â”€â”€â–ºâ”‚        â”‚â”€â”€â”€â”€â–ºâ”‚                 â”‚â”€â”€â”€â”€â–ºâ”‚  OR    â”‚â”€â”€â”€â–º    â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚     (expand)                                (compact)         â”‚
â”‚                                                               â”‚
â”‚   10 channels â†’ 1000 chains      1000 chains â†’ 10 channels   â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>

        <h2>How Decompression Works</h2>
        <p>The decompressor expands few ATE channels to many internal scan chains using XOR networks.</p>

<pre><code>ATE Input Channels:
  CH0, CH1, CH2, CH3, ... CH9 (10 channels)

Each scan chain gets a unique XOR combination:
  Chain[0]   = CH0 âŠ• CH2 âŠ• CH5
  Chain[1]   = CH1 âŠ• CH3 âŠ• CH7
  Chain[2]   = CH0 âŠ• CH4 âŠ• CH9
  Chain[3]   = CH2 âŠ• CH5 âŠ• CH8
  ...
  Chain[999] = CH1 âŠ• CH6 âŠ• CH7</code></pre>

        <h3>Visual Representation</h3>
<div class="diagram">        CH0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Chain 0
                     â”‚            â”‚
        CH1 â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€XORâ”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Chain 1
                â”‚    â”‚        â”‚   â”‚
        CH2 â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€XORâ”€â”€â”€â”˜   â””â”€â”€â”€XORâ”€â”€â”€â”€â”€â”€â”€â”€â–º Chain 2
                â”‚    â”‚   â”‚             â”‚
                â”‚    â””â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Chain 3
                â”‚        â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€XORâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Chain 4</div>

        <p>ATPG tool calculates what values to put on each ATE channel to achieve desired values on all chains.</p>

        <h2>How Compaction Works</h2>
        <p>The compactor compresses many scan chain outputs into few ATE channels using XOR trees.</p>

<div class="diagram">        Chain[0] â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚                             â”‚
        Chain[1] â”€â”€XORâ”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º CH0
                       â”‚               â”‚             â”‚
        Chain[2] â”€â”€â”€â”€â”€â”€â”´â”€â”€XORâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€XORâ”€â”€â–º CH1
                             â”‚         â”‚
        Chain[3] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º CH2
                                       â”‚
        Chain[4] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º CH3</div>

        <p><strong>Key insight:</strong> Any fault effect on any chain will propagate to at least one output.</p>

        <h2>Compression Trade-offs</h2>

        <h3>X-Masking</h3>
        <p>Unknown values (X) in scan chains can corrupt compressed output.</p>

<pre><code>Compression without X handling:
  Chain[0] = 1
  Chain[1] = X (unknown)
  Chain[2] = 0
  
  Compressed = 1 âŠ• X âŠ• 0 = X  â† Lost all information!</code></pre>

        <p><strong>Solutions:</strong></p>
        <ul>
            <li>X-blocking: Mask out chains with X</li>
            <li>X-bounding: Control X propagation</li>
            <li>X-tolerant compactors</li>
        </ul>

        <h3>Masking</h3>
        <p>Some faults may "mask" each other through XOR.</p>

<pre><code>If Chain[0] has fault effect = 1
And Chain[1] has fault effect = 1

Compressed = 1 âŠ• 1 = 0  â† Fault masked!</code></pre>

        <p>ATPG tools handle this by generating patterns carefully.</p>

        <h2>Compression Ratio</h2>

<pre><code>Compression Ratio = Internal Chains / ATE Channels

Example:
  1000 internal chains
  10 ATE channels
  Ratio = 100:1

Higher ratio = Faster testing, but harder ATPG
Lower ratio  = Easier ATPG, but slower testing

Typical: 50:1 to 200:1</code></pre>

        <h2>Industry Compression Schemes</h2>
        <table>
            <tr><th>Vendor</th><th>Technology</th></tr>
            <tr><td>Synopsys</td><td>DFTMAX, DFTMAX Ultra</td></tr>
            <tr><td>Cadence</td><td>Modus</td></tr>
            <tr><td>Mentor/Siemens</td><td>Tessent</td></tr>
        </table>
        <p>All use similar principles: LFSR-based decompression, XOR compaction.</p>

        <h2>Benefits Summary</h2>
        <table>
            <tr><th>Metric</th><th>Without Compression</th><th>With 100:1 Compression</th></tr>
            <tr><td>Test Data Volume</td><td>10 GB</td><td>100 MB</td></tr>
            <tr><td>Test Time</td><td>17 min/chip</td><td>10 sec/chip</td></tr>
            <tr><td>ATE Memory</td><td>Need huge memory</td><td>Fits in ATE</td></tr>
            <tr><td>Cost per chip</td><td>$10</td><td>$0.10</td></tr>
        </table>

        <div class="summary">
            <h3>Summary</h3>
            <table>
                <tr><th>Concept</th><th>Key Point</th></tr>
                <tr><td>Problem</td><td>Too much data for millions of FFs</td></tr>
                <tr><td>Decompressor</td><td>Expands few inputs to many chains (XOR)</td></tr>
                <tr><td>Compactor</td><td>Reduces many outputs to few (XOR tree)</td></tr>
                <tr><td>Ratio</td><td>Typically 50:1 to 200:1</td></tr>
                <tr><td>Trade-off</td><td>X-handling, fault masking</td></tr>
            </table>
        </div>

        <div class="nav-buttons">
            <a href="06_ATPG_Basics.html" class="nav-btn prev">ATPG Basics</a>
            <a href="08_At_Speed_Testing.html" class="nav-btn next">At-Speed Testing</a>
        </div>
    </div>
    
    <div class="footer">
        <p>DFT Engineering Blog Series | Part 7 of 11</p>
    </div>
</body>
</html>
